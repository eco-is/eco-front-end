<div id="grid">
    <div class="metadata-input">
        <mat-form-field class="age-field">
            <mat-label>Name</mat-label>
            <input [(ngModel)]="name" [formControl]="nameField" matInput placeholder="Type name...">
            <mat-error *ngIf="nameField.invalid">{{getNameErrorMessage()}}</mat-error>
        </mat-form-field>
        <app-chips-with-input 
            [autofillOptions]="unselectedCategories" 
            id="categories-field" 
            label="Categories" 
            placeholder="Add category..." 
            [required]="true"
            (itemsChangedEvent)="updateCategories($event)">
        </app-chips-with-input>
        <mat-form-field class="age-field">
            <mat-label>Min. age</mat-label>
            <input [(ngModel)]="selectedMinAge" [formControl]="minAgeField" type="number" min="0" max="150" matInput>
            <mat-error *ngIf="minAgeField.invalid">{{getAgeErrorMessage()}}</mat-error>
        </mat-form-field>
        <mat-form-field class="age-field">
            <mat-label>Max. age</mat-label>
            <input [(ngModel)]="selectedMaxAge" [formControl]="maxAgeField" type="number" min="0" max="150" matInput>
            <mat-error *ngIf="maxAgeField.invalid">{{getAgeErrorMessage()}}</mat-error>
        </mat-form-field>
        <mat-form-field id="difficulty-field">
            <mat-label>Difficulty</mat-label>
            <mat-select [formControl]="difficultyField" [(value)]="selectedDifficulty">
                <mat-option value="">None</mat-option>
                <mat-option value="EASY">Easy</mat-option>
                <mat-option value="MEDIUM">Medium</mat-option>
                <mat-option value="HARD">Hard</mat-option>
            </mat-select>
            <mat-error *ngIf="difficultyField.invalid">{{getDifficultyErrorMessage()}}</mat-error>
        </mat-form-field>
    </div>
    <mat-form-field id="content-input">
        <mat-label>Content</mat-label>
        <textarea matInput placeholder="Enter markdown..." [(ngModel)]="content" [formControl]="contentField"></textarea>
        <mat-error *ngIf="contentField.invalid">{{getContentErrorMessage()}}</mat-error>
    </mat-form-field>
    <div id="content-preview">
        <h1>Preview:</h1>
        <markdown [data]="content"></markdown>
    </div>
    <div id="button-wrapper">
        <button 
            mat-fab 
            extended 
            color="primary" 
            (click)="onCreate()" 
            [disabled]="minAgeField.invalid || maxAgeField.invalid || difficultyField.invalid || contentField.invalid || selectedCategories.length === 0">
                <mat-icon>add</mat-icon>
                Create
        </button>
    </div>
</div>
